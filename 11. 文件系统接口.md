### 文件系统接口

#### 基础概念

操作系统提供信息存储的、统一的逻辑接口。 

文件是逻辑外存的最小分配单元，它可以大致分为数据和程序

##### 打开文件
 进程的打开文件表

 系统的打开文件表

<img src="md_image\image-20220603202506449.png" alt="image-20220603202506449" style="zoom:67%;" />

1. 文件指针 • 文件最后读/写位置指针 • 每个进程打开的文件个数、指针 
2. 文件打开计数器 • 一个文件被打开的次数，当文件关闭时，操作系统必须重设打 开文件表的条目 
3. 文件磁盘位置 • 用于定位磁盘上文件位置信息保存在内存中 
4. 访问权限 • 确定打开文件模式，以便操作系统允许或拒绝以后的I/O请求

##### 顺序访问

##### 直接访问

文件由固定长度的逻辑记录组成，操作系统所提供的块儿号通常为相对块号，它是相对于文件开始的索引；

<img src="md_image\image-20220603204748331.png" alt="image-20220603204748331" style="zoom:50%;" />

相对块号1、2、3...就是文件的第一、二、三块，后边是这些块的实际存储位置，直接在磁盘中访问这些块即可

##### 索引访问

<img src="md_image\image-20220603204931647.png" alt="image-20220603204931647" style="zoom:67%;" />

#### 目录结构

##### 单层

##### 双层

##### 树状

##### 无环图目录

可共享文件和目录，允许目录含有共享子目录和文件

##### 通用图目录

允许环的存在